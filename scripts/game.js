// Generated by CoffeeScript 1.6.3
/*global define*/(function(){define(["store","jquery"],function(e,t){"use strict";var n;n=function(){e.remove("winner");this.$game=t(".game");this.$game.on("click","td",this.mark);this.$game.on("marked","td",this.drawWinner);this.$game.on("clearGame","td",this.clearGame);e.get("P1")||e.set("P1",0);e.get("P2")||e.set("P2",0);t(".well span").text("P1("+e.get("P1")+") x P2("+e.get("P2")+")")};n.prototype.clearGame=function(){if(confirm("Would you like to restart the game?")){window.turn="X";return t("td").each(function(){t(this).attr("class","");return t(this).text("")})}};n.prototype.clearScore=function(){e.set("P1",0);e.set("P2",0);return t(".well span").text("P1("+e.get("P1")+") x P2("+e.get("P2")+")")};n.prototype.drawWinner=function(){t("td").each(function(n){var r,i,s;i="";t("td:nth-child("+n+"),td:nth-child("+(n+3)+"),td:nth-child("+(n+6)+")").each(function(){var n,r;i+=""+t(this).attr("class")+",";if(i==="marked X animated bounce,marked X animated bounce,marked X animated bounce,"||i==="marked O animated bounce,marked O animated bounce,marked O animated bounce,"){r=t(this).text()==="X"?"P1":"P2";e.set(r,e.get(r)+1);n="<div class='alert alert-info alert-dismissable'>		              <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button>		              The winner is "+r+"		            </div>";t(".well").after(n);t(".well span").text("P1("+e.get("P1")+") x P2("+e.get("P2")+")");return t(this).trigger("clearGame")}});if(t(this).prev().hasClass("marked")&&t(this).next().hasClass("marked")&&t(this).hasClass("marked")&&t(this).prev().attr("class")===t(this).next().attr("class")&&t(this).prev().attr("class")===t(this).attr("class")){s=t(this).text()==="X"?"P1":"P2";e.set(s,e.get(s)+1);r="<div class='alert alert-info alert-dismissable'>		              <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button>		              The winner is "+s+"		            </div>";t(".well").after(r);t(".well span").text("P1("+e.get("P1")+") x P2("+e.get("P2")+")");return t(this).trigger("clearGame")}});if(t("td.marked").length===9){alert("The game is tied!");return t(this).trigger("clearGame")}};n.prototype.mark=function(){var e;if(!t(this).hasClass("marked")){e=window.turn||"X";t(this).text(e);t(this).addClass("marked "+e+" animated bounce");e=e==="X"?"O":"X";window.turn=e;t(this).trigger("marked")}};return n})}).call(this);